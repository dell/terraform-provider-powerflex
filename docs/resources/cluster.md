---
# Copyright (c) 2023 Dell Inc., or its subsidiaries. All Rights Reserved.
# 
# Licensed under the Mozilla Public License Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
# 
#     http://mozilla.org/MPL/2.0/
# 
# 
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

title: "powerflex_cluster resource"
linkTitle: "powerflex_cluster"
page_title: "powerflex_cluster Resource - powerflex"
subcategory: ""
description: |-
  This resource can be used to install the PowerFlex Cluster.
---

# powerflex_cluster (Resource)

This resource can be used to install the PowerFlex Cluster.


## Example Usage

```terraform
/*
Copyright (c) 2023 Dell Inc., or its subsidiaries. All Rights Reserved.

Licensed under the Mozilla Public License Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://mozilla.org/MPL/2.0/


Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/

# Command to run this tf file : terraform init && terraform plan && terraform apply.
# Create, Read, Delete and Import operations are supported for this resource.

# To perform Cluster Installation
resource "powerflex_cluster" "test" {
  mdm_password                            = "Password"
  lia_password                            = "Password"
  allow_non_secure_communication_with_lia = false
  allow_non_secure_communication_with_mdm = false
  disable_non_mgmt_components_auth        = false
  cluster = [
    {
      ips                     = "10.10.10.1",
      username                = "root",
      password                = "Password",
      operating_system        = "linux",
      is_mdm_or_tb            = "primary",
      is_sds                  = "yes",
      sds_name                = "sds1",
      is_sdc                  = "yes",
      sdc_name                = "sdc1",
      protection_domain       = "domain_1"
      sds_storage_device_list = "/dev/sdb"
      storage_pool_list       = "pool1"
      perf_profile_for_sdc    = "High",
      ia_rfcache              = "No",
      is_sdr                  = "Yes",
      sdr_all_ips             = "10.10.20.1"
    },
    {
      ips                     = "10.10.10.2",
      username                = "root",
      password                = "Password",
      operating_system        = "linux",
      is_mdm_or_tb            = "Secondary",
      protection_domain       = "domain_1"
      sds_storage_device_list = "/dev/sdb"
      storage_pool_list       = "pool1"
      is_sds                  = "yes",
      sds_name                = "sds2",
      is_sdc                  = "yes",
      sdc_name                = "sdc2",
      perf_profile_for_sdc    = "compact",
      ia_rfcache              = "No",
      is_sdr                  = "No",
    },
    {
      ips                  = "10.10.10.3",
      username             = "root",
      password             = "Password",
      operating_system     = "linux",
      is_mdm_or_tb         = "TB",
      is_sds               = "No",
      is_sdc               = "yes",
      sdc_name             = "sdc3",
      perf_profile_for_sdc = "compact",
      ia_rfcache           = "No",
      is_sdr               = "No",
    },
  ]
  storage_pools = [
    {
      media_type                              = "HDD"
      protection_domain                       = "domain_1"
      storage_pool                            = "pool1"
      replication_journal_capacity_percentage = "50"
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cluster` (Attributes List) Cluster Installation Details (see [below for nested schema](#nestedatt--cluster))
- `lia_password` (String) Lia Password
- `mdm_password` (String) MDM Password

### Optional

- `allow_non_secure_communication_with_lia` (Boolean) Allow Non Secure Communication With lia
- `allow_non_secure_communication_with_mdm` (Boolean) Allow Non Secure Communication With MDM
- `disable_non_mgmt_components_auth` (Boolean) Disable Non Mgmt Components Auth
- `id` (String) ID
- `storage_pools` (Attributes List) Storage Pool Details (see [below for nested schema](#nestedatt--storage_pools))

### Read-Only

- `mdm_list` (Attributes Set) Cluster MDM Details (see [below for nested schema](#nestedatt--mdm_list))
- `protection_domains` (Attributes List) Cluster Protection Domain Details (see [below for nested schema](#nestedatt--protection_domains))
- `sdc_list` (Attributes Set) Cluster SDC Details (see [below for nested schema](#nestedatt--sdc_list))
- `sdr_list` (Attributes Set) Cluster SDR Details (see [below for nested schema](#nestedatt--sdr_list))
- `sds_list` (Attributes Set) Cluster SDS Details (see [below for nested schema](#nestedatt--sds_list))

<a id="nestedatt--cluster"></a>
### Nested Schema for `cluster`

Required:

- `is_mdm_or_tb` (String) Is Mdm Or Tb
- `operating_system` (String) Operating System
- `password` (String, Sensitive) Password used to log in to the node.

Optional:

- `fault_set` (String) Fault Set
- `ips` (String) IP address to be used for multiple purposes. Use this field to designate one IP address that will be assigned to all of the following: MDM IP, MDM Mgmt IP and SDS All IP. This option is provided for use cases where separate networks for data and management are not required.
- `is_rfcache` (String) Is RFCache. The acceptable values are `Yes` and `No`. Default value is `No`.
- `is_sdc` (String) Is Sdc. The acceptable values are `Yes` and `No`. Default value is `No`.
- `is_sdr` (String) Is SDR. The acceptable values are `Yes` and `No`. Default value is `No`.
- `is_sds` (String) Is Sds. The acceptable values are `Yes` and `No`. Default value is `No`.
- `mdm_ips` (String) MDM IP addresses used to communicate with other PowerFlex components in the storage network. This is required for all MDMs, Tiebreakers and Standbys.Leave this field blank for hosts that are not part of the MDM cluster.
- `mdm_mgmt_ip` (String) The IP address for the management-only network.The management IP address is not required for: Tiebreaker, Standby Tiebreaker, and any host that is not an MDM. In such cases, leave this field blank.
- `mdm_name` (String) MDMName
- `perf_profile_for_mdm` (String) Performance Profile For MDM
- `perf_profile_for_sdc` (String) Performance Profile For SDC
- `perf_profile_for_sdr` (String) Performance Profile For SDR
- `perf_profile_for_sds` (String) Performance Profile For SDS
- `protection_domain` (String) Protection Domain
- `rf_cache_ssd_device_list` (String) List of SSD devices to provide RFcache acceleration for Medium Granularity data layout Storage Pools.
- `sdc_name` (String) SDC Name
- `sdr_all_ips` (String) SDR IP addresses to be used for communication among all nodes (including all three roles)
- `sdr_application_ips` (String) The IP addresses through which the SDC communicates with the SDR.
- `sdr_external_ips` (String) The IP addresses through which the SDR communicates with peer systems SDRs
- `sdr_name` (String) SDR Name
- `sdr_port` (String) SDR Port
- `sdr_storage_ips` (String) The IP addresses through which the SDR communicates with the MDM for server side control communications.
- `sds_all_ips` (String) SDS IP addresses to be used for communication among all nodes.
- `sds_name` (String) SDS Name
- `sds_storage_device_list` (String) Storage devices to be added to an SDS. For more than one device, use a comma separated list, with no spaces.
- `sds_storage_device_names` (String) Sets names for devices.
- `sds_to_sdc_only_ips` (String) SDS IP addresses to be used for communication among SDS and SDC nodes only.
- `sds_to_sds_only_ips` (String) SDS IP addresses to be used for communication among SDS nodes. When the replication feature is used, these addresses are also used for SDS-SDR communication.
- `storage_pool_list` (String) Sets Storage Pool names
- `username` (String) Enter name either root or a non-root sudo user
- `virtual_ip_nics` (String) The NIC to which the virtual IP addresses are mapped.
- `virtual_ips` (String) Virtual IPs


<a id="nestedatt--storage_pools"></a>
### Nested Schema for `storage_pools`

Required:

- `media_type` (String) Media Type

Optional:

- `compression_method` (String) Compression Method
- `data_layout` (String) Data Layout
- `external_acceleration` (String) External Acceleration
- `protection_domain` (String) Protection Domain
- `replication_journal_capacity_percentage` (String) Replication Journal Capacity Percentage
- `storage_pool` (String) Storage Pool
- `zero_padding` (String) Zero Padding


<a id="nestedatt--mdm_list"></a>
### Nested Schema for `mdm_list`

Read-Only:

- `id` (String) ID
- `ip` (String) MDM Node IP
- `mdm_ip` (String) MDM IP
- `mgmt_ip` (String) MGMTIP
- `mode` (String) Mode
- `name` (String) Name
- `role` (String) Role
- `virtual_ip` (String) Virtual IP
- `virtual_ip_nic` (String) Virtual IPNIC


<a id="nestedatt--protection_domains"></a>
### Nested Schema for `protection_domains`

Read-Only:

- `name` (String) Name
- `storage_pool_list` (Attributes List) Storage Pools (see [below for nested schema](#nestedatt--protection_domains--storage_pool_list))

<a id="nestedatt--protection_domains--storage_pool_list"></a>
### Nested Schema for `protection_domains.storage_pool_list`

Read-Only:

- `compression_method` (String) Compression Method
- `data_layout` (String) Data Layout
- `external_acceleration` (String) External Acceleration
- `media_type` (String) Media Type
- `name` (String) Name
- `replication_journal_capacity_percentage` (Number) Replication Journal Capacity Percentage
- `zero_padding` (String) Zero Padding



<a id="nestedatt--sdc_list"></a>
### Nested Schema for `sdc_list`

Read-Only:

- `guid` (String) GUID
- `id` (String) ID
- `ip` (String) SDC Node IP
- `name` (String) Name


<a id="nestedatt--sdr_list"></a>
### Nested Schema for `sdr_list`

Read-Only:

- `all_ips` (String) All IP
- `application_ips` (String) Application IP
- `external_ips` (String) External IP
- `id` (String) ID
- `ip` (String) SDR Node IP
- `name` (String) Name
- `port` (Number) Port
- `storage_ips` (String) Storage IP


<a id="nestedatt--sds_list"></a>
### Nested Schema for `sds_list`

Read-Only:

- `all_ips` (String) All IP
- `devices` (Attributes Set) Devices (see [below for nested schema](#nestedatt--sds_list--devices))
- `fault_set` (String) Fault Set
- `id` (String) ID
- `ip` (String) SDS Node IP
- `name` (String) Name
- `protection_domain_id` (String) Protection Domain Name
- `protection_domain_name` (String) Protection Domain Name
- `sds_only_ips` (String) SDSOnly IP
- `sds_sdc_ips` (String) SDSSDCIP

<a id="nestedatt--sds_list--devices"></a>
### Nested Schema for `sds_list.devices`

Read-Only:

- `max_capacity_in_kb` (Number) Max Capacity
- `name` (String) Name
- `path` (String) Path
- `storage_pool` (String) Storage Pool Name

## Import

Import is supported using the following syntax:

```shell
# Below are the steps to import Cluster :
# Step 1 - To import a Cluster , we need the MDM IP, MDM Password, LIA Password  of that Cluster 
# Step 2 - create a tf file with empty resource block . Refer the example below.
# Example :
# resource "powerflex_cluster" "resource_block_name" {
# }
# Step 3 - execute the command : terraform init && terraform import "powerflex_cluster.resource_block_name" "MDM_IP,MDM_Password,LIA_Password" (resource_block_name must be taken from 2)
# Step 4 - After successful execution of the command , check the state file
```