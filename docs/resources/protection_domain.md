---
# Copyright (c) 2023 Dell Inc., or its subsidiaries. All Rights Reserved.
# 
# Licensed under the Mozilla Public License Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
# 
#     http://mozilla.org/MPL/2.0/
# 
# 
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

title: "powerflex_protection_domain resource"
linkTitle: "powerflex_protection_domain"
page_title: "powerflex_protection_domain Resource - powerflex"
subcategory: ""
description: |-
  This resource can be used to manage protection domains on a PowerFlex array.
---

# powerflex_protection_domain (Resource)

This resource can be used to manage protection domains on a PowerFlex array.


## Example Usage

```terraform
resource "powerflex_protection_domain" "pd" {
  # required paramaters  ======

  name = "domain_1"

  # optional parameters  ======

  active = true

  # SDS IOPS throttling
  # overall_io_network_throttling_in_kbps must be greater than the rest of the parameters
  # 0 indicates unlimited IOPS
  protected_maintenance_mode_network_throttling_in_kbps = 10 * 1024
  rebuild_network_throttling_in_kbps                    = 10 * 1024
  rebalance_network_throttling_in_kbps                  = 10 * 1024
  vtree_migration_network_throttling_in_kbps            = 10 * 1024
  overall_io_network_throttling_in_kbps                 = 20 * 1024

  # Fine granularity metadata caching
  fgl_metadata_cache_enabled      = true
  fgl_default_metadata_cache_size = 1024

  # Read Flash cache
  rf_cache_enabled          = true
  rf_cache_operational_mode = "ReadAndWrite"
  rf_cache_page_size_kb     = 16
  rf_cache_max_io_size_kb   = 32
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Unique name of the protection domain instance.

### Optional

- `active` (Boolean) Whether the PD should be in `Active` state. Default value is `true`.
- `fgl_default_metadata_cache_size` (Number) Fine Granularity Metadata Cache size. Can be set only when `fgl_metadata_cache_enabled` is set to `true`.
- `fgl_metadata_cache_enabled` (Boolean) Whether Fine Granularity Metadata Cache is enabled or not.
- `overall_io_network_throttling_in_kbps` (Number) Maximum allowed IO for protected maintenance mode in KBps. Must be greater than any other network throttling parameter. The value `0` represents unlimited bandwidth. The default value is `0`.
- `protected_maintenance_mode_network_throttling_in_kbps` (Number) Maximum allowed IO for protected maintenance mode in KBps. The value `0` represents unlimited bandwidth. The default value is `0`.
- `rebalance_network_throttling_in_kbps` (Number) Maximum allowed IO for rebalancing in KBps. The value `0` represents unlimited bandwidth. The default value is `0`.
- `rebuild_network_throttling_in_kbps` (Number) Maximum allowed IO for rebuilding in KBps. The value `0` represents unlimited bandwidth. The default value is `0`.
- `rf_cache_enabled` (Boolean) Whether SDS Rf Cache is enabled or not.
- `rf_cache_max_io_size_kb` (Number) Maximum IO of the SDS RF Cache in KB. Can be set only when `rf_cache_enabled` is set to `true`.
- `rf_cache_operational_mode` (String) Operational Mode of the SDS RF Cache. Accepted values are `Read`, `Write`, `ReadAndWrite` and `WriteMiss`. Can be set only when `rf_cache_enabled` is set to `true`.
- `rf_cache_page_size_kb` (Number) Page size of the SDS RF Cache in KB. Can be set only when `rf_cache_enabled` is set to `true`.
- `vtree_migration_network_throttling_in_kbps` (Number) Maximum allowed IO for vtree migration in KBps. The value `0` represents unlimited bandwidth. The default value is `0`.

### Read-Only

- `fgl_default_num_concurrent_writes` (Number) Fine Granularity default number of concurrent writes.
- `id` (String) Unique identifier of the protection domain instance.
- `links` (Attributes List) Underlying REST API links. (see [below for nested schema](#nestedatt--links))
- `replication_capacity_max_ratio` (Number) Maximum Replication Capacity Ratio.
- `rf_cache_accp_id` (String) ID of the RF Cache Acceleration Pool attached to the PD.
- `state` (String) State of the PD.

<a id="nestedatt--links"></a>
### Nested Schema for `links`

Read-Only:

- `href` (String) Specifies the exact path to fetch the details.
- `rel` (String) Specifies the relationship with the Protection Domain.

## Import

Import is supported using the following syntax:

```shell
# The command is
# terraform import powerflex_protection_domain.pd <id>
# Example:
terraform import powerflex_protection_domain.pd 202b3d0300000004
# after running this command, populate the name field in the config file to start managing this resource
```